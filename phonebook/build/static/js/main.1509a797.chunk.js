(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t(16),o=t.n(r),c=t(3),u=t(4),i=t.n(u),s="/api/persons",l={getPhonebook:function(){return i.a.get(s).then((function(e){return e.data}))},create:function(e){return i.a.post(s,e).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(s,"/").concat(e))},update:function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))}},d=t(0),b=function(e){var n=e.nameState,t=e.numberState,a=e.phonebookHandler,r=e.nameHandler,o=e.numberHandler;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Add an entry"}),Object(d.jsxs)("form",{onSubmit:a,children:[Object(d.jsxs)("div",{children:["Name: ",Object(d.jsx)("input",{value:n,onChange:r})]}),Object(d.jsxs)("div",{children:["Phone Number: ",Object(d.jsx)("input",{value:t,onChange:o})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})]})},j=function(e){var n=e.searchState,t=e.searchHandler;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("p",{children:["Find names containing: ",Object(d.jsx)("input",{value:n,onChange:t})]})})},h=function(e){var n=e.names,t=e.deleteHandler,a=n.map((function(e){return Object(d.jsxs)("p",{children:[e.name,": ",e.number," ",Object(d.jsx)("button",{value:e.id,onClick:t,children:"Delete Entry"})]},e.id)}));return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Numbers"}),a]})},m=function(e){var n=e.message,t=e.isError,a={};return null===n?null:(t&&(a.color="red"),Object(d.jsx)("div",{className:"notification",style:a,children:n}))},f=(t(40),function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)("Enter a name.."),u=Object(c.a)(o,2),i=u[0],s=u[1],f=Object(a.useState)("Enter a number.."),p=Object(c.a)(f,2),O=p[0],g=p[1],v=Object(a.useState)({filtered:!1,param:""}),x=Object(c.a)(v,2),k=x[0],y=x[1],S=Object(a.useState)(null),E=Object(c.a)(S,2),H=E[0],w=E[1],C=Object(a.useState)(null),N=Object(c.a)(C,2),P=N[0],U=N[1];Object(a.useEffect)((function(){null!==H&&setTimeout((function(){return w(null)}),3e3),null!==P&&setTimeout((function(){return U(null)}),7e3)}),[H,P]),Object(a.useEffect)((function(){console.log("getting phonebook.."),l.getPhonebook().then((function(e){console.log("phonebook promise fulfilled"),r(e.filter((function(e){return Object.keys(e).length>1})))}))}),[H]);var D=k.filtered?t.filter((function(e){return e.name.toUpperCase().search(k.param.toUpperCase())>-1})):t;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Phonebook"}),Object(d.jsx)(m,{message:P,isError:!0}),Object(d.jsx)(m,{message:H}),Object(d.jsx)("div",{children:Object(d.jsx)(j,{searchState:k.param,searchHandler:function(e){""===e.target.value?y({filtered:!1,param:e.target.value}):y({filtered:!0,param:e.target.value})}})}),Object(d.jsx)("div",{children:Object(d.jsx)(b,{nameState:i,numberState:O,phonebookHandler:function(e){e.preventDefault();var n={name:i,number:O},a=t.find((function(e){return e.name.toUpperCase()===n.name.toUpperCase()}));a?(console.log("update"),l.update(a.id,n).then((function(e){console.log("entry updated: ",e.id),w("".concat(a.name," has been updated with a new number!")),s("Enter a name"),g("Enter a number")})).catch((function(e){console.log(e),U("".concat(a.name," was already removed from the phonebook!"))}))):(console.log("push"),l.create(n).then((function(e){console.log("entry appended: ",n.name),w("".concat(n.name," has been added to the phonebook!")),s("Enter a name.."),g("Enter a number..")})).catch((function(e){console.log(e.response.data),U("".concat(e.response.data.error))})))},nameHandler:function(e){s(e.target.value)},numberHandler:function(e){g(e.target.value)}})}),Object(d.jsx)("div",{children:Object(d.jsx)(h,{names:D,deleteHandler:function(e){var n=t.find((function(n){return n.id===e.target.value}));n&&window.confirm("Do you really want to delete this entry?")&&(console.log("deleting entry id: ".concat(n.id)),l.remove(n.id).then((function(e){console.log(e),w("".concat(n.name," has been removed from the phonebook!"))})))}})})]})});o.a.render(Object(d.jsx)(f,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.1509a797.chunk.js.map